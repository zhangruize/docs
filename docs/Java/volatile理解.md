# volatile理解

以前经常讲volatile要记住的就两点：

1. 禁止指令重排
2. 保证可见性。
3. 后来发现应该再增加一点，volatile还保证了double, long写入时的原子性。否则double, long可能会出现“字断裂”的情况。因为64位需要分两次写入，而这两次写入对某些平台不是原子性的。

## 原理

在volatile变量的操作前会加入内存屏障。
# Github, Gitlab 的 CI/CD功能

## CI/CD

CI持续集成，CD持续部署。实际上都是在仓库发生一些事件或者周期性的运行一些自定义的脚本。

对于Github上，被定义为了Actions/Workflow功能。对于Gitlab上，被定义为了Pipeline和Schedulers功能。但这些脚本都是通过yml格式写的，具体的语法规范相似但不相同。需要用的时候多参考下文档。

Github的Actions的运行环境是Github直接提供的Azure上的资源（果然当时决定卖给微软还是很有眼光的），自己只需要写脚本就可以了，比Gitlab要方便。Gitlab需要自己或者企业自行提供、注册GitlabRunner（过程还算简单），然后这些跑GitlabRunner的机器还需要装docker或virtualBox等虚拟化类的软件。因为CI/CD这些脚本往往是需要各种各样的构建、部署环境，当然实在不想弄应该也有办法直接在本地上跑。

## Jenkins

我们去看其本质的时候，其实如果只是针对一个特定项目，用不用上面的这些方案都不是特别重要。实际上不过是（一般而言）都是去在代码更新的时候完成一些回归测试等，再通知测试结果。这些本质上还是依赖git自身的webHook就可以做到。只不过CI/CD以及上面所说是最主要的一个使用场景。

WebHook实际上就是当仓库发生一些事件的时候会给自定的url发送请求告知这些事件，并可能可以修改最终仓库的一些行为（我还没深入研究过，不能确定）。

当我们自己去配置WebHook时，甚至自己写脚本去轮训Git仓库变更时，其实都可以去完成各种自己需要的任务，即使是用Jenkins也不例外。只是上面的CI/CD是针对Github和Gitlab更为简单、封装更好的方案而已。

## Github Actions Secret

GithubActions中自定的workflow脚本难免会用到敏感的如账号、密码等东西，这些可以使用Github Secret来保存，在脚本使用的时候再通过别名引入secrets作为脚本的环境变量即可。这个功能在Gitlab上暂时还没不清楚怎么处理，但应该也是环境变量这些概念所要解决的问题吧。